<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🩺 Suivi de Symptômes - Cabinet Médical</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
</head>
<body class="page-content gradient-bg">
  <nav class="main-nav">
    <a class="nav-link active" href="index.html" aria-current="page">🩺 Application</a>
    <a class="nav-link" href="dashboard.html">📊 Tableau de bord</a>
    <a class="nav-link" href="docs/guide/">📖 Guide patient</a>
    <a class="nav-link" href="checklist.html">✅ Suivi</a>
  </nav>

  <div class="container" style="max-width:1200px; margin:0 auto;">
    <header class="header" style="padding-top:1rem;">
      <h1 class="page-title animate-bounce" style="margin-bottom:.25rem;">🩺 Suivi de Symptômes</h1>
      <p class="page-subtitle" style="margin-top:0;">Déclarez vos symptômes et suivez l’évolution en temps réel.</p>
      <div class="mode-indicator" id="modeIndicator">
        <span id="modeIcon">⏳</span>
        <span id="modeText">Initialisation...</span>
      </div>

      <div class="stats" style="display:flex; gap:1rem; flex-wrap:wrap; margin-top:1rem;">
        <div class="stat-item">
          <div class="stat-number" id="totalParticipants">0</div>
          <div class="stat-label">Patients suivis</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="moodVariety">0</div>
          <div class="stat-label">Symptômes recensés</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="sessionTime">0</div>
          <div class="stat-label">Minutes</div>
        </div>
      </div>
      <div class="mood-visualization" id="moodVisualization"></div>
    </header>

    <div class="main-content" style="display:flex; flex-wrap:wrap; gap:2rem; align-items:flex-start;">
      <!-- Formulaire -->
      <div class="form-section card" style="flex:1 1 380px;">
        <h2 style="margin-top:0;">📝 Déclarer mes symptômes</h2>
        <form id="moodForm">
          <div class="form-group">
            <label for="patientId">Identifiant patient :</label>
            <input type="text" id="patientId" required placeholder="Ex: P12345" maxlength="30">
          </div>

          <div class="form-group">
            <label>Sélectionnez vos symptômes :</label>
            <div class="emoji-selector">
              <button type="button" class="emoji-btn" data-emoji="🤒" title="Fièvre">🤒</button>
              <button type="button" class="emoji-btn" data-emoji="🤧" title="Rhume / nez bouché">🤧</button>
              <button type="button" class="emoji-btn" data-emoji="🤢" title="Nausées">🤢</button>
              <button type="button" class="emoji-btn" data-emoji="🤕" title="Maux de tête">🤕</button>
              <button type="button" class="emoji-btn" data-emoji="😵" title="Vertiges">😵</button>
              <button type="button" class="emoji-btn" data-emoji="🤯" title="Douleur intense">🤯</button>
              <button type="button" class="emoji-btn" data-emoji="😴" title="Fatigue">😴</button>
              <button type="button" class="emoji-btn" data-emoji="😮‍💨" title="Essoufflement">😮‍💨</button>
              <button type="button" class="emoji-btn" data-emoji="🤒" title="Toux">🤒</button>
            </div>
          </div>

          <div class="form-group">
            <label for="intensity">Intensité des symptômes (0 = faible; 10 = très fort) :</label>
            <input type="range" id="intensity" min="0" max="10" value="5">
          </div>

          <div class="form-group">
            <label for="location">Localisation principale :</label>
            <select id="location" required>
              <option value="">Choisissez une zone</option>
              <option value="tête">Tête</option>
              <option value="poitrine">Poitrine</option>
              <option value="ventre">Ventre</option>
              <option value="dos">Dos</option>
              <option value="jambes">Jambes</option>
              <option value="autre">Autre</option>
            </select>
          </div>

          <div class="form-group">
            <label for="comment">Commentaire (optionnel) :</label>
            <input type="text" id="comment" maxlength="150" placeholder="Ex: pris du paracétamol ce matin...">
          </div>

          <button type="submit" class="submit-btn" id="submitBtn">✅ Envoyer mes symptômes</button>
        </form>
        <p style="font-size:.75rem;color:#666; margin-top:1rem;">⚠️ Données confidentielles - usage médical uniquement.</p>
      </div>

      <!-- Résultats -->
      <div class="display-section" style="flex:1 1 460px; min-width:340px;">
        <h2 style="margin-top:0;">📊 État des patients</h2>
        <div class="mood-list social-feed" id="moodList">
          <div class="loading">
            <p>⏳ En attente des premières déclarations...</p>
            <p style="font-size: 0.9em; margin-top: 10px; color: #666;">Soumettez vos symptômes pour commencer.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="dashboard-footer" style="margin-top:3rem;">
    © <span id="year"></span> Suivi de Symptômes • Données médicales protégées
  </footer>

  <script src="private-config.js"></script>
  <script type="module" src="main.js?v=2.1.1"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
